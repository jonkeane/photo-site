[context.production.environment]
HUGO_VERSION = "0.147.9"

[context.deploy-preview.environment]
HUGO_VERSION = "0.147.9"

[dev]
framework = "hugo"

# Cache static assets aggressively (1 year)
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Cache gallery pages - allows CDN edge caching + browser caching with revalidation
[[headers]]
  for = "/gallery/*"
  [headers.values]
    Cache-Control = "public, max-age=3600, stale-while-revalidate=86400"
    Netlify-CDN-Cache-Control = "public, max-age=86400, stale-while-revalidate=604800"

# Not ready for this yet, but this mostly works â€” still some scripts inline (need to hash)
# [[headers]]
#   for = "/*"
#   [headers.values]
#     Content-Security-Policy = "default-src 'self'; script-src 'self' https://api.flickr.com/services/ https://fineartamerica.com/ https://www.googletagmanager.com https://www.google-analytics.com; connect-src 'self' https://api.ipdata.co; img-src 'self' http://localhost:1313/ https://live.staticflickr.com/; font-src 'self' http://localhost:1313/ https://fonts.gstatic.com; style-src-elem 'self' https://fonts.googleapis.com; style-src 'self' 'unsafe-inline'; frame-src https://fineartamerica.com/;"